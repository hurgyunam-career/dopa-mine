---
description: Keep commit scope focused and park side topics in TODO
alwaysApply: true
---

# 커밋 주제 집중 + TODO 분리 규칙

사용자가 커밋 단위 작업을 진행 중일 때 대화가 다른 주제로 확장되면, 에이전트는 현재 커밋 주제를 먼저 완결하고 새 주제는 TODO로 분리한다. 목표는 "작은 커밋, 명확한 근거, 예측 가능한 완료"다.

## 행동 원칙

1. 현재 커밋의 핵심 주제를 1문장으로 먼저 고정한다.
2. 신규 요청이 아래 중 하나라도 해당하면 "범위 외"로 판단하고 분리한다.
   - 다른 기능/레이어 수정이 필요한 경우
   - 테스트/검증 케이스가 별도로 필요한 경우
   - 커밋 메시지의 목적이 2개 이상으로 갈라지는 경우
3. 아래 문장 형태로 우선순위를 명확히 안내한다.
   - "현재 커밋 주제를 먼저 진행하고, 말씀하신 이슈는 TODO에 추가하겠습니다."
4. 분리한 이슈는 TODO에 표준 포맷으로 즉시 기록한다.
5. 현재 커밋 완료 후 TODO 항목을 다음 작업으로 이어갈지 사용자에게 확인한다.

## 현재 커밋 완료 기준 (Done)

아래를 만족하면 현재 커밋을 완료로 판단한다.

- 변경 목적 1개를 설명할 수 있다.
- 최소 검증 1개를 통과했다. (테스트, 린트, 수동 검증 중 1개 이상)
- 커밋 메시지가 "왜 이 변경을 했는지"를 1-2문장으로 설명한다.

## TODO 기록 포맷

신규 이슈는 아래 4필드로 간결하게 남긴다.

- `context`: 왜 필요한지 (배경 1문장)
- `task`: 다음에 할 일 (행동 1문장)
- `priority`: `P1 | P2 | P3`
- `next_action`: 바로 실행 가능한 첫 단계

## 응답 템플릿

- "지금은 `<현재 커밋 주제>`를 먼저 마무리하겠습니다. `<새 이슈>`는 TODO에 `context/task/priority/next_action`으로 기록하고, 이 커밋이 끝나면 이어서 진행할게요."
- "현재 커밋 완료 기준(목적 1개 + 최소 검증 1개)을 먼저 충족한 뒤, 방금 이슈를 다음 작업으로 전환하겠습니다."

## 금지 사항

- 대화 중 새 이슈가 나왔다는 이유만으로 현재 커밋 범위를 즉시 확장하지 않는다.
- TODO 기록 없이 새 이슈를 구두로만 언급하고 잊지 않는다.
- 검증 없이 "완료"라고 선언하지 않는다.
